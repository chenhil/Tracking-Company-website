!function(){"use strict";function t(t,a){var o=this;o.trackingNumber=t.trackingNumber,o.stops=[],o.errorMessage="",o.isBusy=!0,o.newStop={};var e="/api/package/"+o.trackingNumber+"/stops";a.get(e).then(function(t){angular.copy(t.data,o.stops)},function(t){o.errorMessage="Failed to load package infos."}).finally(function(){o.isBusy=!1}),o.addStop=function(){o.isBusy=!0,a.post(e,o.newStop).then(function(t){o.stops.push(t.data),o.newStop={}},function(t){o.errorMessage="Failed to add new stop"}).finally(function(){o.isBusy=!1})},o.deleteStop=function(t){var e=o.stops[t];confirm("Are you sure you want to delete this item?")&&(o.isBusy=!0,a({url:"/api/package/"+o.trackingNumber+"/stops",method:"DELETE",data:{location:e.location,activity:e.activity},headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(a){o.errorMessage=a.data,o.stops.splice(t,1)},function(t){o.errorMessage=t.data}).finally(function(){o.isBusy=!1}))}}t.$inject=["$routeParams","$http"],angular.module("app-ManagePackage").controller("StopEditorController",t)}();